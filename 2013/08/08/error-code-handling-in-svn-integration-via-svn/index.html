<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Thoughts on latest technologies">

    <title>Error Code Handling In Svn Integration Via Svn - Xebia Blog</title>

    <link rel="canonical" href="http://blog.xebia.in/2013/08/08/error-code-handling-in-svn-integration-via-svn/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Xebia Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/default-blog-pic.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Error Code Handling In Svn Integration Via Svn</h1>
                    
                    <span class="meta">Posted by swatijain85 on August 8, 2013</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">

        <div class="row">
          <!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=shekhargulati" async="async"></script>

            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
              <h4>Reading time about 4  minutes</h4>

              <h1>Error Code Handling in SVN Integration via SVN</h1>

<p>Subversion is one of the most widely used Version Control System in IT industry. Many applications need to manage their project artifacts which can be easily addressed by use of a Version Control System. For integration with Subversion, I have used SVNKit ( <a href="http://svnkit.com">http://svnkit.com/</a>) in my application. It supports all standard operations of Version Control System (like Check -in, Check-out, copy etc.) and works over SVN, HTTP, HTTPS, SSH and File protocols. While working on integration with Subversion (SVN) via SVNKit, I had encountered various exception and error code that needs to be handled in application for successful implementation of Version Control Operations. Some of those exceptions and error codes had stumped me and I was left wondering on how to move forward with this implementation. But a little bit of research and deeper dive to Subversion implementation helped me to bail myself out of this tricky situation. Below are the error codes that I had handled in my application while performing various Version Control Operations.  Though the below described SVN error codes are few in number and doesn&#39;t cover all, but it covers the common error codes that you&#39;ll encounter during the integration and it will also give you a fair idea on how to handle them. Please note that all these error codes are instances of class &quot;org.tmatesoft.svn.core.SVNErrorCode&quot; which represents predefined error with description. It can be retrieved from instance of class &quot;org.tmatesoft.svn.core.SVNException&quot; in following manner: </p>
<div class="highlight"><pre><code class="language-text" data-lang="text"> SVNErrorCode errorCode = ((SVNException) svne).getErrorMessage() .getErrorCode();  
 if (errorCode == SVNErrorCode.WC_LOCKED) { //handle exception  
 ...  
 ...  
 } else if (errorCode == SVNErrorCode.WC_OBSTRUCTED_UPDATE) {  
 ...  
 ... }  
 ... 
 ...  
</code></pre></div>
<ol>
<li><p><strong>WC_LOCKED</strong>: You&#39;ll get this error code, when you will attempt to lock an already locked directory. It can be resolved by performing cleanup operation on working copy via &quot;org.tmatesoft.svn.core.wc.SVNClientManager&quot; object. It will remove stale locks and get your working copy into a usable state again.                                                                                                 </p>
<div class="highlight"><pre><code class="language-text" data-lang="text"> svnClientManager.getWCClient().doCleanup(workingCopyPath, deleteWCProperties)  
</code></pre></div></li>
<li><p><strong>CLIENT_MODIFIED</strong>: You&#39;ll get this error code, when you try to attempt a restricted operation on a modified resource. I got this error code while performing &#39;delete&#39; operation on Version Control Project artifact. Since my application always performed hard delete, I just caught this exception and performed a forceful delete on Version Control Project artifact.</p></li>
<li><p><strong>WC<em>OBSTRUCTED</em>UPDATE:</strong> You&#39;ll get this error code when update operation is obstructed by SVN Server. This usually happens when your local working copy is associated with different SVN connection URL while you are trying to perform Version Control operation (like Check- out) with different SVN Connection URL. A typical use case where you can receive this error is when IP or hostname of the machine where your SVN Server is located changes. In this case, your local working copy will be associated with SVN connection URL having old IP or hostname while you are performing Version Control operation with new IP or hostname.It can be resolved by re-locating your working copy to new SVN connection URL via below method: </p>
<div class="highlight"><pre><code class="language-text" data-lang="text"> svnClientManager.getUpdateClient()  
</code></pre></div>
<p>.doRelocate(versionControlProjectFolder, oldSVNURL,newSVNURL, true);</p></li>
</ol>

<p>You can retrieve old SVN connection URL from your working copy in following manner: </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">    /*  
 * Revision is taken as UNDEFINED as it throws exception for HEAD * revision if WC URL changes  
 */
SVNInfo wcInfo = svnClientManager.getWCClient().doInfo( versionControlProjectFolder, SVNRevision.UNDEFINED);

SVNURL oldSVNURL = wcInfo.getURL();  
</code></pre></div>
<ol>
<li><p><strong>WC<em>FOUND</em>CONFLICT or FS<em>TXN</em>OUT<em>OF</em>DATE:</strong> You&#39;ll get this error code when there is a conflict in the working copy that obstructs the current operation. A typical use case when you can receive this error is when you try to commit the modification made to any lower revision of Version Control Project artifact. You may argue the validity of this use case, but believe me, many developers and programmers have to deal with this use case where there is a need to make some modifications to lower revision of artifact and then commit to Version Control System at &#39;Head&#39; (or top) revision.It can be resolved by calling an update operation followed by performing an automatic conflict resolution on working copy path. Here is the code snippet that does this job for you: </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">   svnClientManager.getUpdateClient().doUpdate(checkoutDestpath,SVNRevision.create(-1), SVNDepth.INFINITY,allowUnversionedObstructions, depthIsSticky); 
</code></pre></div>
<p>try {<br>
 /*  </p>

<ul>
<li>SVNConflictChoice is kept as MINE<em>FULL to resolve the * conflict which occurs when we check-in an artifact after * modifying it on lower revision<br>
*/<br>
svnClientManager.getWCClient().doResolve(checkoutDestpath, SVNDepth.INFINITY, SVNConflictChoice.MINE</em>FULL);<br>
} catch (SVNException e) {<br>
final SVNErrorCode resolveErrorCode = svne.getErrorMessage().getErrorCode();<br>
if (resolveErrorCode == SVNErrorCode.WC<em>FOUND</em>CONFLICT) { 
....
.... 
} }<br>
/*<br></li>
<li>SVNConflictChoice is kept as MERGED to resolve the<br></li>
<li>conflict which occurs when we call version control<br></li>
<li>delete<br>
*/<br>
svnClientManager.getWCClient().doResolve(checkoutDestpath, SVNDepth.INFINITY, SVNConflictChoice.MERGED);<br></li>
</ul></li>
</ol>


                <hr>

                <div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'xebiaww'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2013/08/08/devops-demystified/" data-toggle="tooltip" data-placement="top" title="Devops Demystified">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2013/08/24/http-caching-using-jax-rs/" data-toggle="tooltip" data-placement="top" title="Http Caching Using Jax Rs">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.facebook.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://github.com/xebiaww">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; Xebia Blog 2015</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


</body>

</html>
