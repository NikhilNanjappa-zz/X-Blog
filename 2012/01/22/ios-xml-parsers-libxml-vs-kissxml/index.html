<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Thoughts on latest technologies">

    <title>Ios Xml Parsers Libxml Vs Kissxml - Xebia Blog</title>

    <link rel="canonical" href="http://blog.xebia.in/2012/01/22/ios-xml-parsers-libxml-vs-kissxml/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Xebia Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="http://xebia.com/" target="_blank">Xebia</a>
                </li>
                <li>
                    <a href="/">Home</a>
                </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/default-blog-pic.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Ios Xml Parsers Libxml Vs Kissxml</h1>
                    
                    <span class="meta">Posted by GauravS on January 22, 2012</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">

        <div class="row">
          <!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=shekhargulati" async="async"></script>

            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
              <h4>Reading time about 3  minutes</h4>

              <h1>XML Parsers for iOS: libXML vs KissXML</h1>

<p>XML Parsing on iPhone/iPad - Is that something your current sprint revolves around? Well if it does, this blog might help you. While parsing XMLs on device, we need to look into factors like performance and memory consumption. While googling, i found couple of XML parsing APIs including Apple&#39;s native <a href="http://developer.apple.com/library/mac/#documentation/Coc%3C/em%3Eoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html">NSXMLParser</a>. NSXMLParser looked like this is all i need. But my requirement was also to &#39;write&#39; xmls making sure that i do not compromise on performance and memory. On googling more i found couple of APIs which can provide me XML writing capabilities. I chose to explore <a href="http://xmlsoft.org/">libXML2</a> and <a href="https://github.com/robbiehanson/KissXML">KissXML</a>.</p>

<p>You need to have some basic settings in order to use any of these APIs. Open your project build settings and search for following two parameters and enter the respective values: </p>

<ul>
<li><strong>Header Search Paths:</strong> <em>/usr/include/libxml2</em></li>
<li><strong>Other Linker Flags:</strong><em>-lxml2</em></li>
</ul>

<p>and you are good to go!</p>

<p>While the memory consumption by both the APIs are almost same but there is a big difference when it comes to development. libXML2 is written in C, so it&#39;s hard to call it as developer-friendly. On the other side, KissXML is written in Objective C, so it&#39;s pretty easy to understand and implement as compared to libXML2.</p>

<p>I will show and compare the basic parsing logic provided by both the APIs.</p>

<p><strong>libXML:</strong></p>
<div class="highlight"><pre><code class="language-text" data-lang="text"> NSString _path = [[NSBundle mainBundle] pathForResource:@&quot;Employee&quot; ofType:@&quot;xml&quot;]; NSData _xmlData = [NSData dataWithContentsOfFile:path]; xmlTextReaderPtr reader = xmlReaderForMemory([xmlData bytes], [xmlData length], [path UTF8String], nil, (XML_PARSE_NOBLANKS | XML_PARSE_NOCDATA | XML_PARSE_NOERROR | XML_PARSE_NOWARNING));


    if(!reader) {
        NSLog(@&amp;quot;Error loading XML&amp;quot;);
    }

    NSString *currentNode = nil;
    NSString *nodeValue = nil;

    employeeCollection = [NSMutableArray array];

    NSDictionary *employee = nil;

    char* temp;

    while (true) {
        if (!xmlTextReaderRead(reader)) break;
        switch (xmlTextReaderNodeType(reader)) {
            case XML_READER_TYPE_ELEMENT: {
                temp = (char *) xmlTextReaderConstName(reader);
                currentNode = [NSString stringWithCString:temp encoding:NSUTF8StringEncoding];
                if([currentNode isEqualToString:@&amp;quot;employee&amp;quot;]) {
                    employee = [NSMutableDictionary dictionary];
                    [employeeCollection addObject:employee];
                }
                break;
            }
            case XML_READER_TYPE_TEXT: {
                temp = (char *) xmlTextReaderConstValue(reader);
                nodeValue = [NSString stringWithCString:temp encoding:NSUTF8StringEncoding];
                [employee setValue:nodeValue forKey:currentNode];
                currentNode = nil;
                nodeValue = nil;
                break;
            }
            default:
                break;
        }
    }
</code></pre></div>
<p><strong>KissXML:</strong> (using XPath)</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"> NSString _source = [NSString stringWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@&quot;employee&quot; ofType:@&quot;xml&quot;] encoding:NSUTF8StringEncoding error:&amp;error]; DDXMLDocument _theDocument = [[DDXMLDocument alloc] initWithXMLString:source options:0 error:&amp;error]; NSMutableArray *employeeList = [[NSMutableArray alloc] init];


    NSArray *employeeXmlResult = [theDocument nodesForXPath:@&amp;quot;/xml/employees/employee&amp;quot; error:&amp;amp;error];

    for (DDXMLElement *employee in employeeXmlResult) {
        NSMutableArray *arr = [[NSMutableArray alloc] init];
        arr = (NSMutableArray *)[employee children];

        NSString *employeeName = [[employee attributeForName:@&amp;quot;name&amp;quot;] stringValue];
        [employeeList insertObject:employeeName atIndex:0];

    }
</code></pre></div>
<p>So was there something in both the code snippets that comes into mind at first? May be the developer-friendliness i was talking above? One of the reason i preferred KissXML was this.</p>

<p>One thing which is important to note here is the performance consideration. While i was testing my project with some extra data stubbed at the backend, i found some pause happening while using KissXML. The pause happened when my application received response for that heavy XML. When i replaced the parsing logic with libXML2, i noticed that the pause went unnoticeable. Though the actual data was not at all heavy, so i simply ignored this test. But this could be an important issue which you can look into before going for KissXML.</p>

<h2>Comments</h2>

<p><strong><a href="#9075" title="2012-06-21 14:13:59">Andrew</a>:</strong> Very good post! Helped me a lot. But the xml file itself is missing. Though that &#39;s the only disadvantage i noticed. TY!</p>


                <hr>

                <div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'xebiaww'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2012/01/20/why-to-choose-jmeter-for-performance-testing/" data-toggle="tooltip" data-placement="top" title="Why To Choose Jmeter For Performance Testing">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2012/01/23/mongodb-replica-set-on-openshift-flex/" data-toggle="tooltip" data-placement="top" title="Mongodb Replica Set On Openshift Flex">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.facebook.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://github.com/xebiaww">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; <a href="http://xebia.com/" target="_blank">Xebia</a> 2015</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58958750-1', 'auto');
  ga('send', 'pageview');

</script>
</body>

</html>
