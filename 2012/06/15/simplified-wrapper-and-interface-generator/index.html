<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Thoughts on latest technologies">

    <title>Simplified Wrapper And Interface Generator - Xebia Blog</title>

    <link rel="canonical" href="http://xebia.com/2012/06/15/simplified-wrapper-and-interface-generator/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Xebia Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/default-blog-pic.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Simplified Wrapper And Interface Generator</h1>
                    
                    <span class="meta">Posted by Shruti Khattar on June 15, 2012</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

				<h1>Simplified Wrapper and Interface Generator</h1>

<p>In this blog, I am going to share some insights on the software development tool called SWIG- Simplified Wrapper and Interface Generator. SWIG works as an interface compiler, through which you can use the C/C++ native libraries and code in your programming language. This tool has customized features, specific to almost every native, scripting or AI language, to allow C/C++ code to be called from it. It also supports cross language polymorphism. The question that irks is, why would we need it? Let us try and find it out by taking an example of one of the most popular choice of language among software developers - Java. Being one of the most robust and a rich development platform available at our disposal today, it still lacks some important features and has some limitations. Some of them are:  • Java does not expose the lower level system facilities to the programmers. The details of the underlying operating system and hardware devices are abstracted by the JVM. C/C++ provides you a convenient access to both of them. • The Date/Time API in Java. With every new release, the developers are hoping for a better and enhanced version of this library with better presentation, sensible semantics and manipulation capabilities. But, till now, it is disappointing. Though, there are some alternate libraries available, like Joda Time, but that also suffers from some limitations, especially while customizing a new time zone. The libraries in C and C++ are better structured. • Memory management. Because we do not have pointers arithmetic in Java, there is no direct way we can access or manipulate the memory location which is being assigned to the object being created. The destruction of objects cannot be governed by the code, it is entirely in the hands of garbage collector. • In some cases, templates in C++ are more powerful than Generics framework in Java. Example, template functions can accept default parameters, generic functions do not work with default parameters. • The operator overloading feature is very limited. It is not even close to the versatility of the same feature in C++ How to use SWIG in java? Simple! Just download and configure the SWIG plug-in in your editor. The dependency for the tool has to be included in the POM.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">               org.apache.maven.plugins
               maven-swig-plugin
               1.3.40-1-SNAPSHOT
</code></pre></div>
<p>The C/C++ code is transformed into a corresponding glue code or proxy Java classes, which acts as a wrapper to bind the code into the target language (Java in this case). The C/C++ source code have to be a part of an interface file with .i extension, where each component(s) has to be incorporated with %include directive. We can generate the interface to throw a java exception from C++function. This allows to utilize exhaustive exception handling feature in java.</p>

<p>This will generate a java proxy interface as below. public class Example {</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># include

template&lt;int n&gt; Class Sample{ public: Sample *calculate(int a, int b); void main(){ Sample sample= new Sample(); int factorial= sample.fact(5); int mod= sample.my_mod(7,3); cout&lt;&lt; mod };

Sample:: int fact(int n) { if (n &lt;= 1) cout&lt;&lt;1; else cout&lt;&lt; n*fact(n-1); }

Sample:: int my_mod(int x, int y) { cout&lt;&lt; (x%y); } 
</code></pre></div>
<p>Let this file be saved as Sample.cpp. The corresponding interface file, which would serve as an interface to swig tool would be:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"> /_sample.i _/ %module sample %include template &lt;int n&gt; %include time.h %{ extern double My_variable; extern int fact(int n); extern int my_mod(int x, int y); %} extern double My_variable; extern int fact(int n); extern int my_mod(int x, int y); %javaexception(&quot;java.lang.IllegalArgumentException&quot;) calculate { try { $action } catch (std::some_exception &amp;e) { jclass clazz = jenv-&gt;FindClass(&quot;java/lang/IllegalArgumentException&quot;); jenv-&gt;ThrowNew(clazz, &quot;Illegal argument exception&quot;); return $null; } }
</code></pre></div>
<p>Now, the command:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"> swig -c++ -java sample.i 
</code></pre></div>
<p>It will create a wrapper sample_wrap.cxx or a corresponding JNI code for the C/C++ function, and it is good to be used in your Java code</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"> class JavaApp { public static void main(String argv[]) { System.loadLibrary(&quot;sample&quot;); public static int getFact(int n) { return sampleJNI.fact(int n); public Example calculate(int a, int b) throws java.lang.IllegalArgumentException; } } 
</code></pre></div>
<p>Enums are fully supported and come in 3 categories- Type Safe, proper java enum and type unsafe enums.</p>

<p>A way to generate simple java enum is as below.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"> %include &quot;enums.swg&quot;

%typemap(javain) enum SWIGTYPE &quot;$javainput.ordinal()&quot; %typemap(javaout) enum SWIGTYPE { return $javaclassname.class.getEnumConstants()[$jnicall]; } %typemap(javabody) enum SWIGTYPE &quot;&quot;

%inline %{ enum Direction { NORTH, SOUTH, EAST, WEST }; void setDirection(Direction direction); Direction getDirection(); %}

This will Generate following java type enum class.

public enum Direction { NORTH, SOUTH, EAST, WEST; }

public static void setDirection(Direction direction) { exampleJNI.setDirection(direction.ordinal()); }

public static Direction getDirection() { return Direction.class.getEnumConstants()[exampleJNI.getDirection()]; }
</code></pre></div>
<p>There is a lot that you can do with this tool, like, restricting the premature garbage collection, rapid prototyping, interactive debugging and so on. But, it is only recommended to be used if your application is using it moderately or needs it extensively. Otherwise, SWIG would be an overkill.</p>


                <hr>

                <div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'xebiaww'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2012/06/15/create-update-and-delete-jobs-dynamically-in-quartz/" data-toggle="tooltip" data-placement="top" title="Create Update And Delete Jobs Dynamically In Quartz">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2012/06/17/liferay-service-builder-finders/" data-toggle="tooltip" data-placement="top" title="Liferay Service Builder Finders">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.facebook.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://github.com/xebiaww">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; Xebia Blog 2015</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


</body>

</html>
