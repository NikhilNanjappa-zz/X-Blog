<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Thoughts on latest technologies">

    <title>Hadoop Streaming - Xebia Blog</title>

    <link rel="canonical" href="http://blog.xebia.in/2012/06/25/hadoop-streaming/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Xebia Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/default-blog-pic.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Hadoop Streaming</h1>
                    
                    <span class="meta">Posted by vgupta on June 25, 2012</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">

        <div class="row">
          <!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=shekhargulati" async="async"></script>

            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
              <h4>Reading time about 2  minutes</h4>

              <h1>Hadoop Streaming</h1>

<p>A basic template for writing a Hadoop job using Java is </p>

<ol>
<li>Write a Mapper class.</li>
<li>Write a Reducer class.</li>
<li>Write a Driver code to configure and run the job.</li>
</ol>

<p>However, logic (mapper and reducer logic) for some jobs can be programmed using unix commands. Hadoop streaming, a contrib package provides a way to use unix commands as mappers and reducers. In this blog, I will demonstrate running a Hadoop job using Hadoop streaming.</p>

<p><strong>Hadoop Streaming</strong></p>

<p>Streaming API of Hadoop is an API to write map and reduce functions in languages other than Java. It uses Unix standard streams as the interface between Hadoop and your program, so you can use any language that can read standard input and write to standard output.</p>

<p>Map input data is passed over standard input to your map function, which processes it line by line and writes lines to standard output. A map output key-value pair is written as a single tab-delimited line.  The reduce function reads lines from standard input, which the framework guarantees are sorted by key, and writes its results to standard output.</p>

<p>Apart from standard unix commands, we can also use languages like Ruby and Python to program map and reduce functions.</p>

<p><strong>Example</strong></p>

<p>The prerequisite for running this example are</p>

<ol>
<li><a href="http://hadoop.apache.org/common/docs/r0.20.2/quickstart.html#Installing+Software">Hadoop installation</a></li>
<li>Data set, which can be downloaded from <a href="http://www.nber.org/patents/">National Bureau of Economic Research</a>. The file that needs to be downloaded is <a href="http://data.nber.org/patents/Cite75_99.zip">Pairwise Citations</a>. This file includes all US patent citations for utility patents granted in the period 1-Jan-75 to 31-Dec-99. More information about the data set is available at <a href="http://data.nber.org/patents/Cite75_99.txt">http://data.nber.org/patents/Cite75_99.txt</a>.</li>
</ol>

<p>The two commands that we will use in this example are <strong>cut *<em>and *</em>uniq</strong>. <a href="http://www.computerhope.com/unix/ucut.htm">Cut </a>command is used to cut out specified fields of a line, whereas <a href="http://www.computerhope.com/unix/uuniq.htm">Uniq</a> command is used for filtering out repeated lines from a file.</p>

<p>Hadoop job that we will execute will give a list of all the unique cited patent ids. To run the job, please execute the following command from the hadoop distribution folder</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">bin/hadoop jar contrib/streaming/hadoop-*-streaming.jar -input &lt;input path&gt; -output &lt;output path&gt; -mapper <span class="s1">&#39;cut -f 2 -d ,&#39;</span> -reducer <span class="s1">&#39;uniq&#39;</span>
</code></pre></div>
<p>Let&#39;s discuss the above command in detail. Since, Hadoop Streaming is a contrib package, it&#39;s jar placed in the contrib folder of the Hadoop distribution. -input and -output are standard hadoop attributes to specify the locations of input and output locations. In case of Hadoop streaming, mapper and reducer are unix commands which operate on each line of input.</p>

<p>The mapper expression will split each line of input based on comma(,) and pick the second element of the splitted result. So, the output of the mapper is cited patent id in each line. Now, the job of the reducer is to simply remove the duplicates and getting us the desired output. </p>

<p><strong>Conclusion</strong></p>

<p>As seen from the above example, with Hadoop Streaming we need not write and maintain the code for Mappers and Reducers. It combines the powers of scripting languages and parallel processing capabilities of Hadoop infrastructure to deliver jobs without having to write Java programs, thus, resulting in quicker response to the ad-hoc queries and requirements of the business.</p>

<hr>


                <hr>

                <div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'xebiaww'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2012/06/17/liferay-service-builder-finders/" data-toggle="tooltip" data-placement="top" title="Liferay Service Builder Finders">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2012/06/27/groovy-adding-property-in-a-class-by-ast-transformation/" data-toggle="tooltip" data-placement="top" title="Groovy Adding Property In A Class By Ast Transformation">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.facebook.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://github.com/xebiaww">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; Xebia Blog 2015</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58958750-1', 'auto');
  ga('send', 'pageview');

</script>
</body>

</html>
