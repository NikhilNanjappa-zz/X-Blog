<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Thoughts on latest technologies">

    <title>Quick Start With Automated Functional Testing Of Grails Application - Xebia Blog</title>

    <link rel="canonical" href="http://blog.xebia.in/2012/06/06/quick-start-with-automated-functional-testing-of-grails-application/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Xebia Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/default-blog-pic.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Quick Start With Automated Functional Testing Of Grails Application</h1>
                    
                    <span class="meta">Posted by ssinghal on June 6, 2012</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">

        <div class="row">
          <!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=shekhargulati" async="async"></script>

            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
              <h4>Reading time about 4  minutes</h4>

              <h1>Quick Start with Automated Functional Testing of Grails Application</h1>

<h3><strong>1. Introduction</strong></h3>

<p>There are many plug-ins available by which one can automate functional tests for grails application, notably <a href="http://grails.org/plugin/webtest">webtest</a>, <a href="http://grails.org/plugin/functional-test">functional-test</a>, <a href="http://www.grails.org/plugin/geb">geb</a>, <a href="http://grails.org/plugin/selenium-rc">Selenium-RC </a>and <a href="http://www.grails.org/plugin/webdriver">Webdriver</a>. Though we haven’t tried all, but explored grails-webdriver plug-in and used for automation.</p>

<p><strong>Why Grails-Webdriver plug-in? And the reasons are:</strong></p>

<p>• Easy Grails-Webdriver integration helps to quick start with functional testing of web application • No need to learn any specific tool, one must have some knowledge of webdriver and programming language (Java or Groovy) • Support for Page Object Pattern in Webdriver to implement high-level abstraction and to hide HTML details • Ability to run individual (or multiple) tests directly through IDE like any other JUnit test. • Ability to run functional tests in both HtmlUnit (for speed) and real web browsers like Firefox, IE and Chrome. • Auto Reporting in grails after test execution. </p>

<h3><strong>2. Prerequisites</strong></h3>

<p><strong>Tools required:</strong></p>

<p>• <a href="http://seleniumhq.org/download/">Selenium IDE</a>: Selenium IDE is used to record the test script quickly. • <a href="http://getfirebug.com/downloads">Firebug</a> • IDE as <a href="http://www.springsource.org/springsource-tool-suite-download">SpringSourceToolSuite</a> or <a href="http://www.jetbrains.com/idea/">IntelliJ</a>: IDE is used to maintain and write test scripts in a structured way.</p>

<p><strong>Install Plug-in:</strong> It is very easy to install webdriver plug-in in the grails main project or separate test project via IDE or command line by using following command:</p>

<p><strong>grails install-plugin webdriver</strong></p>

<p>Once the plug-in is installed, we have a separate functional folder along with unit and integrate folder in test folder. Now we are ready to go for automated functional tests. </p>

<h3><strong>3. Getting Started</strong></h3>

<p>Consider a Test Scenario, <strong>“To login in the application successfully.”</strong></p>

<p><img src="http://xebee.xebia.in/wp-content/uploads/2012/06/Login_Screen-300x195.png" alt="" title="Image1: Login_Screen"></p>

<hr>

<hr>

<hr>

<hr>

<hr>

<hr>

<hr>

<hr>

<p><strong>Step 1: Install Selenium IDE Plug-in in Firefox and start recording test script to enter login credentials and to click Login button.</strong></p>

<p><img src="http://xebee.xebia.in/wp-content/uploads/2012/06/Login_Test_IDE-300x228.png" alt="" title="Image2: Recorded Login Test "></p>

<hr>

<hr>

<hr>

<hr>

<hr>

<hr>

<hr>

<hr>

<hr>

<hr>

<p><strong>Step 2: Export recorded test script into available format:</strong> Selenium IDE provides various formats notably, JUnit 4 (Webdriver); JUnit 3 (RC); JUnit 4(RC); and so on. Once login script is recorded, we exported the script to JUnit 4 (Webdriver) format.</p>

<p><img src="http://xebee.xebia.in/wp-content/uploads/2012/06/available-formats-300x225.png" alt="" title="Image3: Available Formats in Selenium IDE"></p>

<hr>

<hr>

<hr>

<hr>

<hr>

<hr>

<hr>

<hr>

<hr>

<hr>

<p><strong>Step 3: Create test class as test/functional/tests/LoginTest.groovy to paste exported test script.</strong></p>

<p>[sourcecode type=&quot;java&quot;] import org.junit.<em>; import static org.junit.Assert.</em>; import org.openqa.selenium.*; import org.openqa.selenium.firefox.FirefoxDriver; import org.openqa.selenium.support.ui.Select;</p>

<p>public class LoginTest {</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">private WebDriver driver;
private String baseUrl;

@Before
 public void setUp() throws Exception {

    driver = new FirefoxDriver();
    baseUrl = &amp;quot;http://localhost:8080/&amp;quot;;
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
}
</code></pre></div>
<p>@Test public void testLogin() throws Exception {</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">    driver.get(baseUrl + &amp;quot;/login/auth&amp;quot;);
    assertEquals(&amp;quot;Test Application&amp;quot;, driver.getTitle());
    driver.findElement(By.id(&amp;quot;username&amp;quot;)).clear();
    driver.findElement(By.id(&amp;quot;username&amp;quot;)).sendKeys(&amp;quot;admin&amp;quot;);
    driver.findElement(By.id(&amp;quot;password&amp;quot;)).clear();
    driver.findElement(By.id(&amp;quot;password&amp;quot;)).sendKeys(&amp;quot;admin&amp;quot;);
    driver.findElement(By.cssSelector(&amp;quot;button.cta_button&amp;quot;)).click();
}

@After
public void tearDown() throws Exception {

    driver.quit();
}
</code></pre></div>
<p>} 
```</p>

<hr>

<p><strong>Step4: Create Login Page Object class as test/functional/pages/LoginPage.groovy</strong></p>

<p>[sourcecode type=&quot;java&quot;] import org.openqa.selenium.* import org.codehaus.groovy.grails.plugins.webdriver.WebDriverHelper</p>

<p>class LoginPage {</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">// Login Page constants
final static String LOGIN_PAGE_URL = &amp;quot;/login/auth&amp;quot;;
final static String LOGIN_BUTTON_CSS = &amp;quot;button.cta_button&amp;quot;;
final static String USERNAME_ID = &amp;quot;username&amp;quot;;
final static String PASSWORD_ID = &amp;quot;password&amp;quot;;
final static String REMEMBER_ME_ID = &amp;quot;remember_me&amp;quot;;
final static String LOGIN_BUTTON_TEXT = &amp;quot;Login&amp;quot;;
final static String FORGOT_PASSWORD_TEXT = &amp;quot;Forgot Password&amp;quot;;

String username;
String password;
WebDriver driver;

public LoginPage() {}

public LoginPage(String username, String password, WebDriver driver) {

    this.username = username;
this.password = password;
    this.driver = driver;
}

public void openLoginPage(WebDriverHelper webdriver) {

    webdriver.open(LOGIN_PAGE_URL);
}

public void login() {

    enterLoginDetails();
    loginButton();
}

public void enterLoginDetails() {

    driver.findElement(By.id(USERNAME_ID)).clear();
    driver.findElement(By.id(USERNAME_ID)).sendKeys(username, Keys.F11);
    driver.findElement(By.id(PASSWORD_ID)).clear();
driver.findElement(By.id(PASSWORD_ID)).sendKeys(password);
}

public void loginButton() {
    driver.findElement(By.cssSelector(LOGIN_BUTTON_CSS)).click();
}
</code></pre></div>
<p>} 
```</p>

<p> </p>

<p>Here the LoginPage Class contains both actions implemented as methods (example enterLoginDetails(), login()) and web elements(like button, text fields, checkbox), which are themselves separate objects. Also If in future there is some change in the HTML of Login Page (for example, change the ID of an element, or add an extra div for example) we only have to modify a specific part of our LoginPage object and not every test that interacted with that element.</p>

<hr>

<p><strong>Step5: Add assertions and modify test script:</strong> Look at the modified test script class “test/functional/tests/LoginTest.groovy “.</p>

<p>[sourcecode type=&quot;java&quot;] import org.openqa.selenium.* import pages.LoginPage import utils.Constants import org.codehaus.groovy.grails.plugins.webdriver.WebDriverHelper import org.junit.Rule import org.openqa.selenium.support.ui.WebDriverWait</p>

<h2>Comments</h2>

<p><strong><a href="#9183" title="2012-07-19 09:55:42">Simmi Singhal</a>:</strong> Hi Kanwalpreet, Thanks for your appreciation. Can you please elaborate more on what kind of text you want to fetch from a page after any CRUD operation. Is it a success message on top or... ?? Its not clear to me. But as per my understanding, you can use following driver&#39;s built-in function to get the text: String text = driver.findElement(By.xpath(&quot;XPath of the message text&quot;).getText(); You can use css Selector or Id or any of css locator with By. I hope this would serve your purpose.. :) Thanks :)</p>

<p><strong><a href="#9180" title="2012-07-18 18:15:30">Kanwalpreet Singh</a>:</strong> Hi , Nice tutorial,helped me alot.I am not able to get the message text from a page after doing create/update.It will be greate if you help me sort it out. Thanks in advance.</p>


                <hr>

                <div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'xebiaww'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2012/05/31/ios-watermarking-the-uiimage-with-users-name/" data-toggle="tooltip" data-placement="top" title="Ios Watermarking The Uiimage With Users Name">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2012/06/12/rich-ui-interactions-the-easy-way-backbone-js/" data-toggle="tooltip" data-placement="top" title="Rich Ui Interactions The Easy Way Backbone Js">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.facebook.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://github.com/xebiaww">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; Xebia Blog 2015</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


</body>

</html>
