<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Thoughts on latest technologies">

    <title>Javascript Client For Web Service Using Cxf - Xebia Blog</title>

    <link rel="canonical" href="http://blog.xebia.in/2012/02/24/javascript-client-for-web-service-using-cxf/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Xebia Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/default-blog-pic.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Javascript Client For Web Service Using Cxf</h1>
                    
                    <span class="meta">Posted by mshah on February 24, 2012</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">

        <div class="row">
          <!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=shekhargulati" async="async"></script>

            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
              <h4>Reading time about 3  minutes</h4>

              <h1>JavaScript client for web service using CXF</h1>

<p>Recently, I was looking for a Java Script client to test my Web Services. After my recent <a href="http://xebee.xebia.in/2012/01/25/what-made-me-to-choose-cxf-over-axis2/">findings on CXF</a>, I found out that it can also create JavaScript clients using tools. Since existing tools had ANT support for generating JavaScript client and my current requirements was to use Maven. After not finding any such configuration, I dug thoroughly the cxf-codegen-plugin, I came up with below configuration for maven to generate JavaScript artifacts.  Below are the guidelines to generate JavaScript artifacts and integrate it with existing JavaScript client.</p>

<p><strong>Create a maven based web project (or use your existing web project) and modify pom.xml as below</strong></p>
<div class="highlight"><pre><code class="language-text" data-lang="text"> &lt;plugin&gt; &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt; &lt;artifactId&gt;cxf-codegen-plugin&lt;/artifactId&gt; &lt;version&gt;2.5.2&lt;/version&gt; &lt;executions&gt; &lt;execution&gt;   
&lt;configuration&gt; &lt;sourceRoot&gt;${project.build.directory}&lt;/sourceRoot&gt; &lt;wsdlOptions&gt; &lt;wsdlOption&gt; &lt;wsdl&gt;http://cxf_ws.cloudfoundry.com/sampleService?wsdl&lt;/wsdl&gt; &lt;/wsdlOption&gt; &lt;/wsdlOptions&gt; &lt;/configuration&gt; &lt;goals&gt; &lt;goal&gt;wsdl2js&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; 
</code></pre></div>
<p>In the pom mentioned above, sourceRoot tag in the configuration has been used to indicate directory to generate artifacts and wsdlOption has been used to mention the wsdl file location.</p>

<p><strong>Execute below maven command to generate JavaScript artifacts.</strong></p>

<p>mvn generate-sources</p>

<p>Once you run above command, a new JavaScript file gets generated at the mentioned destination directory, with the same name as wsdl definition name.</p>

<p><strong>Digging deeper into generated artifact.</strong></p>

<p>In brief about generated JavaScript artifact, There will be an operation function for every exposed web service operation and there will be a serialization and a deserialization functions for every operation function. The serialize function is used to convert the JavaScript object to an XML request format and the deserialize function converts the XML response to the corresponding JavaScript object. There will be a separate function which is used to map all these operation functions with their equivalent serialization/deserialization functions. This function is know as service function and gets generated by reading the service definition from the mentioned wsdl file in pom. The generated service function code starts with a comment given below.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"> // Definitions for service: {http://test.com/}SampleCXFServiceService // Javascript for {http://test.com/}SampleCXFService 
</code></pre></div>
<p><strong>Integrating generated artifact with JavaScript client code.</strong></p>

<p>Modify your client side JavaScript to incorporate generated artifact changes. For example if wsdl definition name is SampleCXFService then a SampleCXFService.js file will get generated as an artifact. You need to include this SampleCXFService.js artifact in your client js. Other than that you also need to <a href="http://www.apache.org/dyn/closer.cgi?path=/cxf/2.5.2/apache-cxf-2.5.2.zip">download</a> CXF JavaScript utility file (cxf-utils.js) and include it in client JavaScript. This is a part of CXF distribution and can be found from apache-cxf-2.5.2-src\rt\javascript\javascript-rt\src\main\resources\org\apache\cxf\javascript location.</p>

<p>Add a JavaScript function (i.e. invokeService() ) to invoke the web service and store the result in a variable or use it directly(like in the snippet given below).</p>

<p><strong>Code snippet for client JavaScript:</strong></p>
<div class="highlight"><pre><code class="language-text" data-lang="text"> &lt;script type=&quot;text/javascript&quot; src=&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;cxf-utils.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;SampleCXFService.js&quot;&gt;&lt;/script&gt;

&lt;script language=&quot;JavaScript&quot; type=&quot;text/javascript&quot;&gt; var SampleService = new test_com__SampleCXFService(); SampleService.url = &quot;http://cxf_ws.cloudfoundry.com/sampleService&quot;;


    function invokeService()
    {
      var name = $(&#39;#inputTextId&#39;).val();
      &amp;lt;!-- Operation function invocation by passing name as input parameter --&amp;gt;
      SampleService.getMessage(successResponse, errorResponse, name);
    }

    &amp;lt;!-- Function gets called for a successResponse. --&amp;gt;
    function sucessResponse(response)
    {
        &amp;lt;!-- Using response text to populate result on UI on success--&amp;gt;
        $(&#39;#result&#39;).text(response.getReturn());
    }

    &amp;lt;!-- Function gets called for an error. --&amp;gt;
    function errorResponse(error)
    {
        alert(&amp;quot;Error message is &amp;quot; + error);
    }


&lt;/script&gt; 
</code></pre></div>
<p>The first 2 lines are used to get the reference of web service using service function. The invokeService() function simply delegating call to operation functions. There are two callback functions also in client js. </p>

<ul>
<li>successResponse(response) : This function retrieves the response object in callback process and gets called after a successful response.</li>
<li>errorResponse(error): In case of web service invocation failure, this function retrieves the error message in the callback process and display that message in an alert.
<strong>References:</strong></li>
</ul>

<p><a href="http://cxf.apache.org/docs/overview.html">http://cxf.apache.org/docs/overview.html</a> <a href="http://cxf.apache.org/docs/wsdl-to-javascript.html">http://cxf.apache.org/docs/wsdl-to-javascript.html</a></p>


                <hr>

                <div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'xebiaww'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2012/02/23/android-social-apis/" data-toggle="tooltip" data-placement="top" title="Android Social Apis">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2012/02/27/using-spring-3-1-profiles-to-achieve-paas-portability/" data-toggle="tooltip" data-placement="top" title="Using Spring 3 1 Profiles To Achieve Paas Portability">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.facebook.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://github.com/xebiaww">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; Xebia Blog 2015</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


</body>

</html>
