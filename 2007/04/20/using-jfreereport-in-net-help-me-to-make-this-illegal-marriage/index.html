<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Thoughts on latest technologies">

    <title>Using Jfreereport In Net Help Me To Make This Illegal Marriage - Xebia Blog</title>

    <link rel="canonical" href="http://blog.xebia.in/2007/04/20/using-jfreereport-in-net-help-me-to-make-this-illegal-marriage/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Xebia Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="http://xebia.com/" target="_blank">Xebia</a>
                </li>
                <li>
                    <a href="/">Home</a>
                </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/default-blog-pic.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Using Jfreereport In Net Help Me To Make This Illegal Marriage</h1>
                    
                    <span class="meta">Posted by balajidl on April 20, 2007</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">

        <div class="row">
          <!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=shekhargulati" async="async"></script>

            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
              <h4>Reading time about 3  minutes</h4>

              <h1>Using JFreeChart in .NET - Help me to make this illegal marriage</h1>

<p>I am trying to use Jfreechart in .NET and I need someone to help me to get ride of issue. If you have some free time and if you are interested in doing weird things :) like this, please drop a comment so that we can try to get this working.</p>

<p>Yes I am not kidding.</p>

<p>Previously I have used Apache FOP in ASP.NET(vb.net) to generate PDF on the fly, i did that since there was no free and easy to use pdf content generator available for .NET. If you want to know how to use Apache FOP in .NET, then please click the link <a href="http://radio.javaranch.com/balajidl/2006/01/12/1137047604301.html">Calling Apache FOP from .NET</a>. If you want to see the pdf that was generated out from .NET using fop, please click this <a href="http://xebee.xebia.in/wp-content/uploads/2007/04/fop-vb-net.pdf">link</a>.</p>

<p>You can use java standalone packages like Xalan, Apache FOP, Servlet, etc., in .NET using <a href="http://www.ikvm.net/">IKVM</a>, IKVM is a .NET implementation of Java.</p>

<p>IKVM can convert the Java jar files to .NET dll files, which you can import as a reference in your .NET project and start using them like how you use Java classes.</p>

<p>For instance, The Apache FOP jars after being converted in to .ddl can be used like ..</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">Try AppDomain.CurrentDomain.Load(&quot;xercesImpl-2.2.1&quot;) AppDomain.CurrentDomain.Load(&quot;batik&quot;) java.lang.System.setProperty(&quot;javax.xml.parsers.SAXParserFactory&quot;, &quot;org.apache.xerces.jaxp.SAXParserFactoryImpl&quot;) Dim filename As String = generateXSLFO() Dim isrc As org.xml.sax.InputSource = New org.xml.sax.InputSource(filename &amp; &quot;.fo&quot;) Dim fs As java.io.FileOutputStream = New java.io.FileOutputStream(filename &amp; &quot;.pdf&quot;) Dim driver As Driver = New Driver(isrc, fs) &#39;driver.setLogger(cl) driver.setRenderer(driver.RENDER_PDF) driver.run() fs.close() Label1.Text = &quot;done&quot; System.IO.File.Delete(filename &amp; &quot;.xml&quot;) System.IO.File.Delete(filename &amp; &quot;.fo&quot;) Catch ex As Exception Label1.Text = ex.ToString End Try
</code></pre></div>
<p>The first step to use Jfreechart in .NET is to convert them to .dll&#39;s. For this, please download and install the ikvm on your PC. Also download the jfreechart lib&#39;s on your pc.</p>

<p>Go to bin directory of ikvm installation and run the following commands.</p>

<p>(For the command to work, i assume that the files like jfreechart-1.0.5.jar, servlet.jar and jcommon-1.0.9.jar were in the bin directory) .</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">ikvmc -target:library -reference:/usr/lib/IKVM.GNU.Classpath.dll servlet.jar ikvmc -target:library -reference:/usr/lib/IKVM.GNU.Classpath.dll -reference:servlet.dll jcommon-1.0.9.jar ikvmc -target:library -reference:/usr/lib/IKVM.GNU.Classpath.dll -reference:servlet.dll reference:jcommon-1.0.9.dll jfreechart-1.0.5.jar
</code></pre></div>
<p>This will generate .dll files of jfreechart, jcommon and servlet.</p>

<p>Now in your VS.NET IDE, Start a new asp.net web application project with C# as backend code. Add the newly generated dll as references to the project. Also add the dll files <strong>IKVM.AWT.WinForms.dll IKVM.GNU.Classpath.dll IKVM.Runtime.dll</strong> as reference to your project. If you want to see the screenshot of my IDE(VS.NET 2003) with references added, please <a href="http://xebee.xebia.in/wp-content/uploads/2007/04/csjfree.gif">click here</a>.</p>

<p>Once you are done with the above tasks, start writing the C# code to call the Jfreechart from .NET.</p>

<p>Here is the code snippet that will be called on button click event of a web page.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">using ikvm.lang; using org.jfree.chart; using javax.servlet.http; using org.jfree.data.category; using ikvm.awt; using ikvm.@internal;


        private void Button1_Click(object sender, System.EventArgs e)
        {
            try
            {
                AppDomain.CurrentDomain.Load(&quot;jcommon-1.0.9&quot;);
                org.jfree.data.general.DefaultPieDataset myDataSet=new org.jfree.data.general.DefaultPieDataset();
                myDataSet.setValue(&quot;Accepted&quot;, 100);
                myDataSet.setValue(&quot;Rejected&quot;, 200);
                JFreeChart pieChart=ChartFactory.createPieChart(&quot;Total requests: 300&quot;, myDataSet,true,true,true);
                pieChart.setBackgroundPaint(java.awt.Color.white);
                pieChart.setBorderVisible(false);
                ChartRenderingInfo thisImageMapInfo=new ChartRenderingInfo();
                java.io.OutputStream jos = new java.io.FileOutputStream(&quot;C:/Inetpub/wwwroot/csharp_jfree/test.jpeg&quot;);
                ChartUtilities.writeChartAsJPEG(jos,100,pieChart,240,230,thisImageMapInfo);


                Label1.Text = &quot;ok&quot;;
            }
            catch(Exception exp)
            {
                Label1.Text = exp.ToString();
            }
        }
</code></pre></div>
<p>Once you compile and deploy the web application, please click the button that will execute the code to generate the JfreeChart. Executing the code will throw the below error saying..</p>

<blockquote>
<p>System.NotImplementedException: The method or operation is not implemented. at ikvm.awt.NetGraphicsEnvironment.createGraphics(BufferedImage bi) at java.awt.image.BufferedImage.createGraphics() at org.jfree.chart.JFreeChart.createBufferedImage(Int32 width, Int32 height, Int32 imageType, ChartRenderingInfo info) at org.jfree.chart.JFreeChart.createBufferedImage(Int32 width, Int32 height, ChartRenderingInfo info) at org.jfree.chart.ChartUtilities.writeChartAsJPEG(OutputStream out, Single quality, JFreeChart chart, Int32 width, Int32 height, ChartRenderingInfo info) at csjfree.WebForm1.Button1_Click(Object sender, EventArgs e) in c:\inetpub\wwwroot\csjfree\webform1.aspx.cs:line 72</p>
</blockquote>

<p>The problem is IKVM.AWT is not fully implemented with Java AWT features. The author of IKVM acclaims this in his website as well.</p>

<p>Now i am wondering how to get ride of this error and make use of jfreechart in asp.net. I was thinking like</p>

<ul>
<li>replacing ikvm.awt dll with another equivalent java Awt dll.</li>
<li>Make use of .NET MFC image rendering and give it to Jfree chart (don&#39;t know how to do it)</li>
</ul>

<p>So again, If you have some free time and if you are interested in doing weird things :) like this, please drop a comment so that we can try to get this working.</p>


                <hr>

                <div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'xebiaww'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2007/04/04/on-demand-validation-using-xhr/" data-toggle="tooltip" data-placement="top" title="On Demand Validation Using Xhr">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2007/04/27/15-stand-up-commitments-to-a-greater-scrum/" data-toggle="tooltip" data-placement="top" title="15 Stand Up Commitments To A Greater Scrum">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.facebook.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://github.com/xebiaww">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; <a href="http://xebia.com/" target="_blank">Xebia</a> 2015</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58958750-1', 'auto');
  ga('send', 'pageview');

</script>
</body>

</html>
