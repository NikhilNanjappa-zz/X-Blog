<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Thoughts on latest technologies">

    <title>On Demand Validation Using Xhr - Xebia Blog</title>

    <link rel="canonical" href="http://blog.xebia.in/2007/04/04/on-demand-validation-using-xhr/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Xebia Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/default-blog-pic.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>On Demand Validation Using Xhr</h1>
                    
                    <span class="meta">Posted by balajidl on April 4, 2007</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">

        <div class="row">
          <!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=shekhargulati" async="async"></script>

            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
              <h4>Reading time about 4  minutes</h4>

              <h1>On-demand validation using XHR</h1>

<p>The idea is to validate the username/password as soon as the user enters the data into the form input field of the browser.</p>

<p><em>The code snippets below will show how to do this using the XMLHttpRequest (<strong>XHR</strong>) object</em>. The XHR (or so called AJAX) helps to do this without making the webpage reload after hitting the server.</p>

<p>Well, you can use famous JavaScript libraries like Prototype, dwr or Dojo to do this. Using them will also reduce the code size. But... if you are interested in knowing how this is really done using XHR directly, then read on... :-)</p>

<p>We want to do something similar to the picture shown below:</p>

<p><img src="http://xebee.xebia.in/wp-content/uploads/2007/04/dynamicValidation1.gif" alt="XHR"></p>

<p><strong>Steps involved:</strong></p>

<ol>
<li>Create the UI web page with form inputs in it.</li>
<li>Write a jsp/servlet/asp or any server side code that can send an XML response back after checking the input username</li>
<li>Write XHR based javascript code on the UI web page to call the server by passing the username, then display back the server response.</li>
</ol>

<p>The source files containing the javascript code, sample html page and the jsp can be downloaded by clicking this <a href="http://xebee.xebia.in/wp-content/uploads/2007/04/sourcefiles1.zip">link</a></p>

<p>Lets see how it can be done... </p>

<ol>
<li>Creating a web page with form inputs field is pretty simple, let&#39;s skip it. </li>
<li>Server side code to check and send an XML response. (The server side code will take the input username from XHR, checks the name against the database and replies back with an XML response.<br>
The xml response for valid username will look like<br>
[xml] &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; True [/xml] and the XML response for an invalid username will look like [xml] &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; False [/xml] </li>
<li>The javascript code that initializes the XHR objects, calls the server side page with the username as inputQueryString, reads the response and then displays that to the web page is shown below. (This script is re-used for both the login page and the registration page) [js] 1 // These two global variables help for reusing the function validateUsername<em>XHR 2 var errMsg1 = &quot;<br>
 </em>Username does not exist.&quot; 3 var errMsg2 = &quot;<br>
 <em>Username already taken, try another.&quot; 4 5 // Initialize the onChange event of the input fields to call the XHR object for processing the validation logic. 6 // See the way how single call</em>validate and validateUsername<em>XHR was used for checking both username validation while logging in and registering. 7 setInit = function(username</em>login, username<em>reg) { 8 username</em>login.onchange = function(event) { 9 callValidate(username<em>login.value, errMsg1, &quot;False&quot;, &quot;login</em>msg&quot;); 10 }; 11 username<em>reg.onchange = function(event) { 12 callValidate(username</em>reg.value, errMsg2, &quot;True&quot;, &quot;reg<em>msg&quot;); 13 }; 14 } 15 16 // This seperate call function will be useful to show animated processing images while making XHR calls. 17 // Interested in knowing how to show &#39;processing&#39; gif image, see my blog post [here][3] 18 // This also be used as a precheck function to decide calling XHR or not. 19 function callValidate(username, errMsg, status, err</em>msg<em>id) { 20 if (username != &quot;&quot;) 21 if (username.length &gt; 0) { 22 document.getElementById(err</em>msg<em>id).innerHTML = &quot;<br>
Checking....&quot;; 23 validateUsername</em>XHR(username, errMsg, status, err<em>msg</em>id); 24 } 25 } 26 27 // Gets the XHR object, loads and parses the XML from the response object 28 // status=False checks for username does exist or not for login purpose 29 // status=True checks for username avalilability for new registration 30 //sets the error message depending on the status 31 function validateUsername<em>XHR(username, errMsg, status, err</em>msg<em>id) 32 { 33 var XHRObject = getXHRObject(); 34 var url = &quot;usernamevalidation</em>ajax.jsp?username=&quot; + username; 35 XHRObject.open(&quot;POST&quot;, url, true); 36 //readystate will be 4 when the webpage is loaded completely. 37 XHRObject.onreadystatechange = function() { 38 if (XHRObject.readyState == 4 &amp;&amp; XHRObject.responseText) { 39 if (XHRObject.responseText.charAt(0) == &quot;&lt;&quot;) { 40 try { 41 //parse the response xml dom and get the value of the node &quot;username&quot; 42 //it would be wiser to check error attribute as well. 43 var response = XHRObject.responseXML.getElementsByTagName(&quot;username&quot;)[0].firstChild.nodeValue; 44 if (response == status) document.getElementById(err<em>msg</em>id).innerHTML = errMsg; 45 else document.getElementById(err<em>msg</em>id).innerHTML = &quot;&quot;; 46 } 47 catch(e) { 48 document.getElementById(err<em>msg</em>id).innerHTML = &quot;&quot;; 49 } 50 } 51 else { 52 eval(XHRObject.responseText) 53 } 54 } 55 } 56 ; 57 XHRObject.send(null); 58 } 59 60 //Get the XMLHttpRequest from browser specific object. 61 function getXHRObject() { 62 var XHRobj = null; 63 try { 64 //Older IE&#39;s 65 XHRObj = new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;) 66 } catch(e) { 67 try { 68 //Newer IE&#39;s 69 XHRObj = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;) 70 } catch(oc) { 71 XHRObj = null 72 } 73 } 74 if (!XHRObj &amp;&amp; typeof XMLHttpRequest != &quot;undefined&quot;) { 75 //Mozila/Safari 76 XHRObj = new XMLHttpRequest() 77 } 78 return XHRObj; 79 } 80 81 [/js]</li>
</ol>

<p>Note: </p>

<ul>
<li>The response from the server can also be text or XHTML. It all depends on how exactly you want to parse the response using javascript.</li>
<li>If you are a beginner and just want to make use of this rich internet applications (AJAX), then it is suggested to start using well-grown javascript libraries like DWR/DOJO/Prototype/TIBCO UI, and so on. These kind of libraries has lot of features built already for you.</li>
</ul>

<p>[3]:</p>


                <hr>

                <div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'xebiaww'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

                <hr>

                <ul class="pager">
                    
                    
                    <li class="next">
                        <a href="/2007/04/20/using-jfreereport-in-net-help-me-to-make-this-illegal-marriage/" data-toggle="tooltip" data-placement="top" title="Using Jfreereport In Net Help Me To Make This Illegal Marriage">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.facebook.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://github.com/xebiaww">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; Xebia Blog 2015</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


</body>

</html>
