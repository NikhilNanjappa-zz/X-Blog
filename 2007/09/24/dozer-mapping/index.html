<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Thoughts on latest technologies">

    <title>Dozer Mapping - Xebia Blog</title>

    <link rel="canonical" href="http://xebia.com/2007/09/24/dozer-mapping/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Xebia Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/default-blog-pic.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Dozer Mapping</h1>
                    
                    <span class="meta">Posted by ajain on September 24, 2007</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

				<h1>Dozer Mapping</h1>

<p>Dozer is a Java Bean to Java Bean mapper that recursively copies data from one object to another. Typically, these Java Beans will be of different complex types. This blog will explain you how to convert one Java Bean into another Java Bean by using context type mapping[Dozer mappings], also you can convert one variable type into another variable type by defining them into XML file. </p>

<p>Dozer supports different type of mappings: 1. Simple property mapping 2. Complex type mapping 3. Bi-directional mapping 4. implicit-explicit mapping 5. Recursive mappings Dozer supports mapping for collection attributes, which is required to element level mapping. Many a times we need a context based mapping with Dozer so as to control number of fields conversion. Let’s take an example of converting</p>

<p><strong>SourceClass *<em>to *</em>DestinationClass</strong>. [java]public class SourceClass { private String sourceStringForInteger; private String sourceStringForLong; private String sourceStringForint; private String sourceStringForString; private List sourceCol; … }</p>

<p>public class DestinationClass { private Integer sourceStringForInteger; private Long sourceStringForLong; private int sourceStringForint; private String sourceStringForString; private List destCol; … }[/java]</p>

<p>You can see <strong>SourceClass *<em>contains *</em>sourceCol *<em>variable of type List, which we are converting into *</em>destCol *<em>variable of type List in *</em>DestinationClass</strong>. Here <strong>sourceCol *<em>is an object type of *</em>SourceChildClass *<em>and *</em>destCol *<em>is an object of *</em>DestinationChildClass</strong>. [java] public class SourceChildClass { private String prop1; private String prop2; private String prop3; … }</p>

<p>public class DestinationChildClass { private Integer prop1; private Integer prop2; private Integer prop3; … }[/java]</p>

<p><strong>Usecase 1 [Simple conversion of source object into destination object.]</strong></p>

<p>We will use map-id attribute to name the cases. In one service call/conversion we want to convert SourceClass into DestinationClass (say caseA) [xml] package.SourceClass package.DestinationClass sourceCol <strong>destCol</strong> package.SourceChildClass package.DestinationChildClass [/xml] In this mapping</p>

<ol>
<li>Tag <class-a> value source class</li>
<li>Tag <class-b> value destination</li>
<li>Tag <a> value collection variable in source class</li>
<li>Tag <b> value collection variable in destination class</li>
<li>Tag <a-hint> Object type of collection defines as tag <a> value.</li>
<li>Tag <b-hint> Object type of collection defines as tag <b> value.</li>
<li>Other SourceClass fields will implicitly convert into DestinationClass fields irrespective of there data types, like sourceStringForInteger a variable of String type in SourceClass, dozer will convert this variable into Integer type in DestinationClass.</li>
</ol>

<p>Let’s see we want to exclude *<em>sourceStringForInteger *</em>variable define *<em>SourceClass *</em>(say caseB).</p>

<p>[xml] package.SourceClass package.DestinationClass sourceCol <strong>destCol</strong> package.SourceChildClass package.DestinationChildClass [/xml] <strong>[xml] sourceStringForInteger  ** sourceStringForInteger ** [/xml]</strong></p>

<p>In this mapping Add  tag and define variable names, which you want to exclude.</p>

<p>Let’s see how code look like. sourceClass is an object of type *<em>SourceClass *</em>which has to be converted into *<em>DestinationClass *</em></p>
<div class="highlight"><pre><code class="language-text" data-lang="text">       [java]DestinationClass destinationClass = (DestinationClass) mapper.map (sourceClass, DestinationClass.class,&quot;caseA&quot;);[/java]
</code></pre></div>
<p>Definition of mapper is done as bean in Spring.</p>

<p>Here we pass a third string argument indicating the name of the mapping to be used by the Dozer. This argument will be used for converting from SourceClass to DestinationClass. While doing reverse conversion means conversion form DestinationClass to SourceClass we have to add <strong>PRIME</strong> to name of mapping.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">        SourceClass sourceClass = (SourceClass) mapper.map (destinationClass, SourceClass.class,&quot;caseAPRIME&quot;);
</code></pre></div>
<p>*<em>Usecase 2 [Complex conversion of source object into destination object.] *</em></p>

<p>Let’s see a complex scenario. Say we want to exclude <strong>prop1 *<em>variable defined in *</em>SourceChildClass *<em>to be converter for caseA. So for this we have to tell the dozer to use a different mapping while converting the object belonging to collection. We could name that mapping as collCaseA, and in the field tag we will use map-id to indicate the name. [xml] package.SourceClass package.DestinationClass &lt;! -- Uses mapping named childCaseA for conversion of objects in the collection -- &gt; sourceCol *</em>destCol</strong> package.SourceChildClass package.DesctinationChildClass [/xml] <strong>[xml]  package.SourceChildClass package.DestinationChildClass prop1 **prop1</strong> [/xml]**</p>

<p>In this mapping The change done is from Usecase-1, CaseA in adding new mapping to define exclude specific field from collection conversion under** &lt; mapping map-id=&quot;collCaseA&quot;&gt;** tag.</p>

<p>Similarly for caseB we want to exclude <strong>prop2 *<em>variable define in *</em>SourceChildClass</strong>, so we call it as collCaseB.</p>

<p>[xml] package.SourceClass package.DestinationClass sourceCol <strong>destCol</strong> package.SourceChildClass package.DestinationChildClass sourceStringForInteger <strong>sourceStringForInteger</strong> [/xml] <strong>[xml] package.SourceChildClass package.DestinationChildClass prop2 **prop2</strong> [/xml]**</p>

<p>In this mapping The change done is from Usecase-1, CaseB in adding new mapping to define exclude specific field from collection conversion under *<em><mapping map-id="collCaseB"> *</em>tag.</p>

<p>Conversion code would remain same for Usecase 2 as in Usecase 1.</p>

<p>_<strong>Conclusion:</strong> _ You have seen various cases of context based mapping conversion. For more information you can refer following resources. • <a href="http://dozer.sourceforge.net/documentation/deepmapping.html">Deep Mappings </a> • <a href="http://dozer.sourceforge.net/">http://dozer.sourceforge.net/</a> If you have any specific question, please comment back. I will try to reply with answer.</p>


                <hr>

                <div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'xebiaww'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2007/09/21/sharpen-up-your-dbunit-testing/" data-toggle="tooltip" data-placement="top" title="Sharpen Up Your Dbunit Testing">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2007/09/25/hibernate-component-value-object-inheritance-mapping/" data-toggle="tooltip" data-placement="top" title="Hibernate Component Value Object Inheritance Mapping">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.facebook.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://github.com/xebiaww">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; Xebia Blog 2015</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


</body>

</html>
