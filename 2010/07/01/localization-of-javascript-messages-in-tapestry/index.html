<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Thoughts on latest technologies">

    <title>Localization Of Javascript Messages In Tapestry - Xebia Blog</title>

    <link rel="canonical" href="http://blog.xebia.in/2010/07/01/localization-of-javascript-messages-in-tapestry/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Xebia Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/default-blog-pic.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Localization Of Javascript Messages In Tapestry</h1>
                    
                    <span class="meta">Posted by gkohli on July 1, 2010</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">

        <div class="row">
          <!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=shekhargulati" async="async"></script>

            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
              <h4>Reading time about 3  minutes</h4>

              <h1>Localization of JavaScript messages in Tapestry</h1>

<p>I am sure if you are reading this blog, you are aware of Tapestry framework and at least know the basics of it. The purpose of this blog is not to show you how to do simple localization in Tapestry. For that you can read from links at the bottom. In this blog we will directly go to the problem of localizing messages/strings/error codes used in JavaScript code.  These days most of the web application wants to have a rich UI for which they either use JavaScript frameworks like Ext JS (now <a href="http://www.sencha.com/">Sencha</a>), Jquery UI, GWT or try to build their interface using Flex. Now flex, GWT all these framework are mature enough and already have inbuilt support for localization, but if we have to use some JavaScript framework, then we have to deal with pain of translating all the messages used in our JavaScript code into multiple languages.</p>

<p>Now, <a href="http://tapestry.apache.org/tapestry5.1/">Tapestry</a> as a framework has exposed a lot of its inbuilt components to the developer, which they can easily exploit to make JavaScript localization a bit simpler. One such interface is <a href="http://tapestry.apache.org/tapestry5.1/guide/assets.html">Asset</a> class, an asset is any kind resource which can be downloaded to the client browser and they are localized; Tapestry will search for a variation of the file appropriate to the effective locale for the request.</p>

<p>So if we have a JavaScript file upload.js which handles file upload functionality and you have code snippet like this,</p>

<p><strong>upload.js</strong></p>

<p>[java]</p>

<p>if(confirm(&quot;A file with this name already exists. Do you want to overwrite?&quot;)) { document.uploadForm.submit(); }</p>

<p>[/java]</p>

<p>And we want our confirmation message to be localized. Since JavaScript are static resources, we cannot use anything dynamic which can populate the localized message into the JS. So a normal tendency is to include the JavaScript code into JSP or any template page wherein we can localize the message.</p>

<p>In tapestry we can easily put all the messages into a separate JavaScript file upload-messages.js and include that in our main component page.</p>

<p><strong>UploadFile.java</strong></p>

<p>[java] //this would locate the localized version of this static resource @Inject @Path(&quot;context:/script/upload-messages.js&quot;) private Asset uploadmessages;</p>

<p>@Inject @Path(&quot;context:/script/upload.js&quot;) private Asset upload;</p>

<p>@Environmental private RenderSupport renderSupport;</p>

<p>void afterRender() { //this would include that JS into the main tapestry tml file after rendering the template renderSupport.addScriptLink(upload); renderSupport.addScriptLink(uploadmessages); }</p>

<p>[/java]</p>

<p><strong>upload-messages.js</strong></p>

<p>[java]</p>

<p>Upload.Messages = { confirmationMessage : A file with this name already exists. Do you want to overwrite? };</p>

<p>[/java]</p>

<p><strong>upload-messages_nl.js</strong></p>

<p>[java]</p>

<p>Upload.Messages = { confirmationMessage : Een bestand met deze naam bestaat reeds. Wilt u overschrijven? };</p>

<p>[/java]</p>

<p>*<em>upload.js [ localized ] *</em></p>

<p>[java]</p>

<p>if(confirm(Upload.Messages.confirmationMessage)) { document.uploadForm.submit(); }</p>

<p>// Declare a emply object for holding the localized messages. On runtime this would be populated with //correct localized messages. VarÂ  Upload = {}</p>

<p>[/java]</p>

<p>So we store all the messages which needs to be localized in upload object inside upload-messages.js and use that from upload.js.This way we don&#39;t have to use any server side code to handle localization.</p>

<p>With the next release of <a href="http://tapestry.apache.org/tapestry5.2-dev/">tapestry 5.2-dev</a>, there would be slight change in package structure.RenderSupport would be replaced by more specialized class JavaScriptSupport which would only handle Javascript files. So from that release we would be using </p>

<p>void
<strong>[importJavascriptLibrary</strong>]<a href="%5BAsset%5D%5B6%5D%20asset">5</a> Imports a JavaScript library as part of the rendered page
Links for Localization in Tapestry </p>

<ol>
<li><a href="http://tapestry.apache.org/tapestry5.1/guide/localization.html">http://code.google.com/p/shams/wiki/Localization</a></li>
<li><a href="http://tapestry.apache.org/tapestry5.1/guide/localization.html">http://tapestry.apache.org/tapestry5.1/guide/localization.html</a>
Page Stats : [pageviews]</li>
</ol>


                <hr>

                <div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'xebiaww'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2010/06/30/mocking-static-methods/" data-toggle="tooltip" data-placement="top" title="Mocking Static Methods">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2010/07/08/localization-in-tapestry/" data-toggle="tooltip" data-placement="top" title="Localization In Tapestry">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.facebook.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://github.com/xebiaww">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; Xebia Blog 2015</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


</body>

</html>
