<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Thoughts on latest technologies">

    <title>Content And Metadata Extraction With Apache Tika - Xebia Blog</title>

    <link rel="canonical" href="http://blog.xebia.in/2010/08/13/content-and-metadata-extraction-with-apache-tika/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Xebia Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/default-blog-pic.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Content And Metadata Extraction With Apache Tika</h1>
                    
                    <span class="meta">Posted by rsharma on August 13, 2010</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">

        <div class="row">
          <!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=shekhargulati" async="async"></script>

            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
              <h4>Reading time about 4  minutes</h4>

              <h1>Content and Metadata Extraction with Apache Tika</h1>

<p>Often we  have the requirement of reading different types of files e.g. CSV, PDF, XLS files and there can be  many more types need to be read in an application.</p>

<p>One way, we try to implement such a requirement is by using separate readers for all of them and  may use different frameworks for analyzing each of them e.g. if our application requires PDF, XML and XLS file parsing, we can create a FileReader interface. Then we can  have different implementations of this interface for each of the types and use PDFBox for reading PDF files, Apache POI for XLS files and SAX for XML  files.</p>

<p>[sourcecode language=&quot;java&quot;] // Read PDF using PDFBox PDDocument pdDoc = new PDDocument(cosDoc); PDFTextStripper stripper = new PDFTextStripper(); String docText = stripper.getText(pdDoc); ....... //Read XLS using POI POIFSFileSystem fileSystem = new POIFSFileSystem(is); HSSFWorkbook workBook = new HSSFWorkbook(fileSystem); ....` // Read XML using SAX SAXParserFactory spf = SAXParserFactory.newInstance(); SAXParser parser = spf.newSAXParser(); [/sourcecode]</p>

<p>This poses additional set of issues like : </p>

<ul>
<li>We must configure each and every type separately.</li>
<li>We may be using different APIs for reading different types, this poses additional challenge of learning and configuring separate APIs for each of types.
As the list of types that your application needs to handle grows, these two issues become more and more visible. </li>
</ul>

<h3>Solution : <a href="http://tika.apache.org/">Apache Tika</a></h3>

<p><a href="http://tika.apache.org/">Apache Tika</a> is one project that can assist in reducing, if not eliminating, these pains. The projects site suggests :</p>

<p>&quot;<em>Apache Tika as toolkit for detecting and extracting meta-data and structured text content from various documents using existing parser libraries</em>&quot;</p>

<p>Basically the Tika API is a single shot API to read data from multiple types, internally it configures and uses the various existing libraries for reading the data eg. POI for Excel stuff.</p>

<h4><strong>The Parser API</strong></h4>

<p>The <a href="http://tika.apache.org/0.7/api/org/apache/tika/parser/Parser.html">Parser</a> interface is the key component of  Tika library, that can be used to parse data . You need to create an instance of  <a href="http://tika.apache.org/0.7/api/org/apache/tika/parser/Parser.html">Parser</a> and call the parse API to get the required data. The project currently supports around 14 different formats e.g. text, pdf,  audio, video, image, archives, ms-office, xmls, emails etc. For each of the  supported format the package has a <a href="http://tika.apache.org/0.7/api/org/apache/tika/parser/Parser.html">Parser </a>which it employs to read the format. You can either use each of these different parsers for reading different types of data or the API also provides a <a href="http://tika.apache.org/0.7/api/org/apache/tika/parser/AutoDetectParser.html">AutoDetectParser</a> that can detect the type of stream and  use the corresponding parser.</p>

<p>The Parser.parse method takes the stream, related meta-data as input and a few more arguments, and outputs the results and extra meta-data. The API is not concerned about the specs of the stream i.e. how it is opened etc. The code using the Parser should take care of the stream maintenance i.e opening and closing.</p>

<p>[sourcecode language=&quot;java&quot;] @Test public void testPDFParser() throws Exception { String resourceLocation = &quot;Tika.pdf&quot;; InputStream input = this.getClass().getClassLoader().getResourceAsStream(resourceLocation); ContentHandler textHandler = new BodyContentHandler(); Metadata metadata = new Metadata(); PDFParser parser = new PDFParser(); parser.parse(input, textHandler, metadata, new ParseContext()); input.close(); System.out.println(&quot;Title: &quot; + metadata.get(&quot;title&quot;)); System.out.println(&quot;Author: &quot; + metadata.get(&quot;Author&quot;)); System.out.println(&quot;format: &quot; + metadata.get(&quot;source&quot;)); System.out.println(&quot;content: &quot; + textHandler.toString()); } @Test public void testAutoDetectParser() throws Exception { InputStream input = this.getClass().getResourceAsStream(&quot;TestTikaAPI.class&quot;); ContentHandler textHandler = new BodyContentHandler(); Metadata metadata = new Metadata(); Parser parser = new AutoDetectParser(); parser.parse(input, textHandler, metadata, new ParseContext()); input.close(); System.out.println(&quot;Title: &quot; + metadata.get(&quot;title&quot;)); System.out.println(&quot;Author: &quot; + metadata.get(&quot;Author&quot;)); } [/sourcecode] </p>

<h4>The Value-Adds</h4>

<p>The Parser API gives back meta data that confirms to various metadata formats like <a href="http://dublincore.org/">Dublin core</a> and <a href="http://creativecommons.org/">Creative commons</a>. If you are not concerned with the meta-data then you can use the simpler <a href="http://tika.apache.org/0.7/api/org/apache/tika/utils/ParseUtils.html">ParseUtils </a>API for extracting only text.</p>

<p>[sourcecode language=&quot;java&quot;] @Test public void testTikaParserUtils() throws Exception { String resourceLocation = &quot;target/test-classes/Tika_EN.txt&quot;; String content = ParseUtils.getStringContent(new File(resourceLocation), new TikaConfig()); System.out.println(content); } [/sourcecode] </p>

<p>The API also provides a bunch of value add APIs like  language detection, stream detection etc.</p>

<p>[sourcecode language=&quot;java&quot;] @Test public void testTypeDetector() throws Exception { String resourceLocation = &quot;Tika.pdf&quot;; InputStream input = this.getClass().getClassLoader().getResourceAsStream(resourceLocation); Detector detector = new TypeDetector(); MediaType media = detector.detect(input, new Metadata()); System.out.println(&quot;Extact Type: &quot; + media.getType()); System.out.println(&quot;Sub Type: &quot; + media.getBaseType()); }</p>

<p>@Test public void testLanguageIdentifier() throws Exception { String resourceLocation = &quot;Tika_EN.txt&quot;; InputStream input = this.getClass().getClassLoader().getResourceAsStream(resourceLocation); ContentHandler textHandler = new BodyContentHandler(); Metadata metadata = new Metadata(); Parser parser = new AutoDetectParser(); parser.parse(input, textHandler, metadata, new ParseContext()); input.close(); LanguageIdentifier languageIdentifier = new LanguageIdentifier(textHandler.toString()); System.out.println(&quot;found language :&quot;+ languageIdentifier.getLanguage() + &quot; certainity : &quot; + languageIdentifier.isReasonablyCertain()); } [/sourcecode]</p>


                <hr>

                <div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'xebiaww'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2010/08/11/xml-communication-between-tapestry-and-flex/" data-toggle="tooltip" data-placement="top" title="Xml Communication Between Tapestry And Flex">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2010/08/16/database-implementation-in-android/" data-toggle="tooltip" data-placement="top" title="Database Implementation In Android">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.facebook.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://github.com/xebiaww">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; Xebia Blog 2015</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


</body>

</html>
