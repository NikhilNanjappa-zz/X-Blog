<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Thoughts on latest technologies">

    <title>Running Test And Generating Xml Html Reports Using Nose Tests Plug In For Python - Xebia Blog</title>

    <link rel="canonical" href="http://blog.xebia.in/2014/06/06/running-test-and-generating-xml-html-reports-using-nose-tests-plug-in-for-python/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Xebia Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="http://xebia.com/" target="_blank">Xebia</a>
                </li>
                <li>
                    <a href="/">Home</a>
                </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/default-blog-pic.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Running Test And Generating Xml Html Reports Using Nose Tests Plug In For Python</h1>
                    
                    <span class="meta">Posted by Msingh on June 6, 2014</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">

        <div class="row">
          <!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=shekhargulati" async="async"></script>

            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
              <h4>Reading time about 4  minutes</h4>

              <h1>Running Test and Generating XML &amp; HTML Reports using Nose Tests plug-in for Python</h1>

<p>Nose Tests is a plug-in for Python that basically provides capabilities to run Python Tests. Nose basically extends the feature of writing,finding and running tests. nosetests will run test from file and directories under the current working directories whose name includes &quot;test&quot; or &quot;Test&quot; at a word boundary like test<em>this. Test output is similar to the  of unittest but also includes captured stdout output from failing tests, for easy print style-debugging. For example if we are using IDE like Eclipse we can specify the location of the directory of file like test</em>example<em>demo.py or if you want to run whole directory then you need to give directory name like example</em>test_set.</p>

<p>=====================================================================================</p>

<p><strong>Installation:-</strong></p>

<p>=======================================================================================</p>

<p>Below are the steps to install nose in your machine:-</p>

<p><strong>Pre-Requisites:-</strong> 1. Pyhton should be install in your machine.If Python is install in your machine you will see python directory in your primary disk like C:\Python27 or C:\Python34 . Directory name depend upon the Python version. If Python is not install then go to <a href="https://www.python.org/download/">https://www.python.org/download/</a> and download the appropriate version for your machine and install the same as per given instruction on Python website.</p>

<p><strong>Install Nose test:-</strong></p>

<p><strong>1. Using easy_install</strong></p>

<p>a). Open command prompt or Power shell in elevator mode.</p>

<p>b). Traverse to the install directory. It will be under PyhtonDirecytory/Scripts like C:\Python27\Scripts.</p>

<p>c). Look for easy_install using dir command.</p>

<p>d). Run easy_install nose (enter) and you will see nose will get install in your machine.</p>

<p>e). After installation you will see a new directory under C:\Python27\Lib\site-packages\nose-1.3.3-py2.7.egg.</p>

<p><img src="http://xebee.xebia.in/wp-content/uploads/2014/06/11-300x168.png" alt="1"> <img src="http://xebee.xebia.in/wp-content/uploads/2014/06/21-300x168.png" alt="2"> <img src="http://xebee.xebia.in/wp-content/uploads/2014/06/31-300x168.png" alt="3"> <img src="http://xebee.xebia.in/wp-content/uploads/2014/06/4-300x168.png" alt="4"> <img src="http://xebee.xebia.in/wp-content/uploads/2014/06/51-300x168.png" alt="5"></p>

<p><strong>2. Using PIP</strong></p>

<p>You can install the same package using pip as well like below:-</p>

<p>pip install nose</p>

<p><strong>3. Download nose Package</strong></p>

<p>if you don&#39;t have setup tool like easy_install and pip install in your machine then you can directly download the package from  https://pypi.python.org/pypi/nose/1.3.3 and extract the download directory. Then in-order to install the same please follow below steps:-</p>

<p>a). Open command prompt or Power shell in elevator mode.</p>

<p>b). navigate to the extracted directory</p>

<p>c).Run the <strong>pyhton setup.py install</strong> command to install the nosetest.</p>

<p><strong>Test Runner:-</strong></p>

<p>Now is the time how to execute the Python test using Nosetests. Here i&#39;m going to show the example of Eclipse IDE and command prompt:-</p>

<p><strong>1. Eclipse IDE</strong></p>

<p>a). To execute the Python test you need to write small python script in order to invoke the nosetests to execute the Python test like below:-</p>

<p><strong>Python_nosetest.py</strong></p>

<p>import os,getopt import sys,time from lib.xml_parser import XMLParser from genericpath import isfile, isdir from dircache import listdir</p>

<p>def main(argv): test_location = &#39;&#39; attrb = &#39;&#39;</p>

<p>try: opts, args = getopt.getopt(argv,&#39;hh:t:a:&#39;, [&#39;tests=&#39;]) except getopt.GetoptError: sys.exit(2)</p>

<p>for opt,arg in opts: if(opt == &#39;-h&#39;): print &#39;Usage: test<em>nosetests -t <test location or test file name>&#39; sys.exit(2) elif opt in (&#39;-t&#39;,&#39;--tests&#39;): print &#39;opt:&#39;,opt,&#39;arg:&#39;,arg test</em>location = arg elif opt in (&#39;-a&#39;,&#39;-A&#39;): print &#39;opt:&#39;,opt,&#39;arg:&#39;,arg attrb = opt+&#39; &#39;+arg</p>

<p>print &#39;Test File location:&#39;,test_location</p>

<p>report<em>directory = os.getenv(&#39;TESTROOTPATH&#39;)+&#39;/test/reports/reports</em>&#39;+time.strftime(&#39;%Y%m%d<em>%H%M%S&#39;) xml</em>filename=report<em>directory+&#39;/xmls</em>&#39;+time.strftime(&#39;%Y%m%d_%H%M%S&#39;)+&#39;.xml&#39;</p>

<h1>xml<em>filename=report</em>directory+&#39;/xmls<em>&#39;+time.strftime(&#39;%Y%m%d</em>%H%M%S&#39;)+&#39;.html&#39;</h1>

<p>os.mkdir(report<em>directory) print listdir(report</em>directory)</p>

<p>tests = os.getenv(&#39;TESTROOTPATH&#39;)+&#39;/test/tests/&#39;+test_location print &#39;Verifying test location %s exists&#39;%tests</p>

<p>if(isfile(tests)): print &#39;Test Script file exists&#39; elif(isdir(tests)): print &#39;Test location Exists&#39; print listdir(tests) else: print &#39;Test location not exists!&#39;,tests,&#39;please check the path&#39; sys.exit(2)</p>

<h1>--with-coverage --cover-html</h1>

<p>command = &#39;nosetests &#39;+attrb+&#39; --with-xunit --xunit-file=&#39;+xml_filename+&#39; &#39;+tests</p>

<p>print &#39;Running Nose Tests command:&#39;,command</p>

<p>os.system(command)</p>

<p>This file mainly responsible for taking test name as a parameter then it will generate the xml file for reporting purpose.</p>

<p>b). Now right click inside this file name in Eclipse IDE and go to Run As-&gt;Run Configurations.</p>

<p><img src="http://xebee.xebia.in/wp-content/uploads/2014/06/12-300x168.png" alt="1"></p>

<p>c). Run Configuration dialog will open. Go to the Argument tab and provide the program arguments like below:-</p>

<p>-t testname.py</p>

<p>e.g. -t test/test1/test<em>Test1</em>create_mail.py</p>

<p><img src="http://xebee.xebia.in/wp-content/uploads/2014/06/22-300x234.png" alt="2"></p>

<p>d). Now click on Apply button and then Run button.</p>

<p>e). Once test execution is complete you will see a xml file has been generated with test results under you project directory reports folder.</p>

<p><img src="http://xebee.xebia.in/wp-content/uploads/2014/06/32-300x146.png" alt="3"></p>

<p><strong>2. Using Command Prompt:-</strong></p>

<p>Above we have seen how we can run the python test using eclipse ide same we can execute using command prompt as well:-</p>

<p>a). Goto  your project directory and run the below commands:-</p>

<p>nosetests --with-nosexunit --core-target=%TESTROOTPATH%\TEST\reports\%2 %TESTROOTPATH%\TEST\%1</p>

<p>Here in above command you need to pass the path of the result directory and root directory of your test.</p>

<p>b). Best way of doing step a is just write above command in a bat file then run the bat file from command prompt with argument as your test name like. if bat file name is Python_nosetest.bat the</p>

<p>Python_nosetest.bat -t testname.py</p>

<p>c).Once test execution is complete you will see a xml file has been generated with test results under you project directory reports folder.</p>

<p><strong>3. Generate HTML report from XML file using nosetests</strong></p>

<p>Now we have seen in above 2 way how we can execute the Python test using nosetests and this will provide us the result in XML format. If we want to generate the HTML result then we need to write a small xml parser script to convert the xml file into HTML format. Like below:-</p>

<p>XMLParser.py</p>

<p>import xml.etree.ElementTree as ET from os import listdir from os.path import isfile, join import time import os</p>

<p>class XMLParser:</p>

<p>header = &quot;&quot; body=&quot;&quot; total_tests = 0</p>


                <hr>

                <div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'xebiaww'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2014/06/04/behavior-driven-development-using-cucumber-jvm-a-java-approach/" data-toggle="tooltip" data-placement="top" title="Behavior Driven Development Using Cucumber Jvm A Java Approach">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2014/06/17/spice-up-your-test-automation-with-test-spicer/" data-toggle="tooltip" data-placement="top" title="Spice Up Your Test Automation With Test Spicer">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.facebook.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://github.com/xebiaww">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; <a href="http://xebia.com/" target="_blank">Xebia</a> 2015</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58958750-1', 'auto');
  ga('send', 'pageview');

</script>
</body>

</html>
