<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Thoughts on latest technologies">

    <title>Component Instrumentation With Ria Test Part 1 - Xebia Blog</title>

    <link rel="canonical" href="http://blog.xebia.in/2011/07/27/component-instrumentation-with-ria-test-part-1/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Xebia Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/default-blog-pic.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Component Instrumentation With Ria Test Part 1</h1>
                    
                    <span class="meta">Posted by Amit Sharma on July 27, 2011</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">

        <div class="row">
          <!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=shekhargulati" async="async"></script>

            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
              <h4>Reading time about 5  minutes</h4>

              <h1>Component Instrumentation with RIA Test (Part-1)</h1>

<p>One of the key requirements of any modern day enterprise product is to have the capability of Automation. While there are many products in the market today that provide UI automation testing (read Record and Play) but when it comes to automate flex applications, RIA Test <a href="http://www.riatest.com">http://www.riatest.com</a> is as close as you can get to have a perfect solution in place.</p>

<p>We have been using RIATest for quite some time in our product &#39;DeployIt&#39; and i must say we have reaped huge benefits from it. Deployit by the way is XebiaLabs product for automated deployments. While RIATest IDE is very intuitive and RIATest itself supports automation for all basic UI components (and also Spark components) . It means that we don&#39;t have to do anything special to record and replay the events originating from those components. Unfortunately, things are not very simple if you want to automate your own components which extends basic flex components. Things heat up even more in case you wish to automate any third party components.</p>

<p>While RIATest has a default support for basic UI components and TabNavigator component is no exception. In this part 1, we will try to analyze how does RIATest support automation for TabNavigator in order to learn the technicalities of automation delegates. If you go to your RIATest installation, you will find a flex_classes.xml. This file contains the information in the form of &#39;ClassInfo&#39; elements which tells the RiaTest Engine about all properties that can be verified for a particular component and which all events can be recorded and replayed.</p>

<p>[sourcecode language=&quot;xml&quot;] <ClassInfo Name="FlexTabNavigator" Extends="FlexViewStack" SupportsTabularData="true"> <Internal Class="mx.events::ItemClickEvent" Type="itemClick"/> <Events> <Event Name="itemClick"> <Internal Class="mx.events::ItemClickEvent" Type="itemClick"/>         <Property Name="relatedObject"> <PropertyType Type="String" Codec="tab"/> </Property> </Event> </Events> <Properties>       <Property Name="horizontalAlign" Verify="true">         <PropertyType Type="String" />       </Property>       <Property Name="horizontalGap" Verify="true">         <PropertyType Type="Number" />       </Property>       <Property Name="tabHeight" Verify="true">         <PropertyType Type="Number" />       </Property>       <Property Name="tabWidth" Verify="true">       <PropertyType Type="Number" />     </Property>     </Properties> </ClassInfo> [/sourcecode]</p>

<p>For TabNavigator component, the &#39;Name&#39; attribute of the classInfo element shows the logical name for the component that will be used by RIATest in the scripts. The &#39;Extends&#39; attribute shows the logical name of the component that TabNavigator extends. In this case it is FlexViewStack and the component is ViewStack. The actual class name is provided in &#39;Class&#39; attribute of &#39;Internal&#39; element. All the events that need to be automated for TabNavigator are provided in the &#39;Event&#39; element under &#39;Events&#39;. Here &#39;Name&#39; attribute depicts the logical name of the event to be used by RIATest in automation scripts. The &#39;Class&#39; attribute of the &#39;Internal&#39; tag under <Event> shows the fully qualified name of the actual event class while &#39;Type&#39; attribute shows the actual event type. Then it is specified that this event needs to be passed an object which is actually the selected Tab. We use a special attribute called &#39;Codec&#39; with value &#39;tab&#39;. The &#39;Properties&#39; tag contains different &#39;Property&#39; elements containing the &#39;Name&#39; and &#39;Type&#39; of the component properties which you want to verify in RIATest scripts.</p>

<p>For each ClassInfo element in flex_classes.xml, you will find a corresponding Automation class called Delegate in the automation.swc which is either included in Flex sdk or you have to include it as a library to support automation. Since we were using Flex sdk 3.5 this swc was bundled as part of the sdk. For TabNavigator, the automation delegate class is TabNavigatorAutomationImpl.</p>

<p>[sourcecode language=&quot;actionscript3&quot;] use namespace mx_internal;</p>

<p>[Mixin]</p>

<p>public class TabNavigatorAutomationImpl extends ViewStackAutomationImpl { include &quot;../../../core/Version.as&quot;;</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">public static function init(root:DisplayObject):void
{
    Automation.registerDelegateClass(TabNavigator, TabNavigatorAutomationImpl);
}

public function TabNavigatorAutomationImpl(obj:TabNavigator)
{
    super(obj);
}

protected function get tabNavigator():TabNavigator
{
    return uiComponent as TabNavigator;
}

override public function get automationTabularData():Object
{
    var delegate:IAutomationObject
            = tabNavigator.getTabBar() as IAutomationObject;

    return delegate.automationTabularData;
}

override public function replayAutomatableEvent(interaction:Event):Boolean
{
    var replayer:IAutomationObject =
                tabNavigator.getTabBar() as IAutomationObject ;
    return replayer.replayAutomatableEvent(interaction);
}

override protected function componentInitialized():void
{
    super.componentInitialized();
    tabNavigator.getTabBar().addEventListener(AutomationRecordEvent.RECORD,
                                tabBar_recordHandler, false, 0, true);
}

private function tabBar_recordHandler(event:AutomationRecordEvent):void
{
    recordAutomatableEvent(event.replayableEvent);
}

}
</code></pre></div>
<p>}</p>

<p>[/sourcecode]</p>

<p>This Automation Delegate class <em>*<em>TabNavigatorAutomationImpl *</em></em>extends <em>*<em>ViewStackAutomationImpl *</em></em>and it implements <em>*<em>IAutomationObject *</em></em>interface . Remember that in its ClassInfo FlexTabNavigator extends FlexViewStack.  So its Automation class also matches the defined ClassInfo.  One of the most important methods of this delegate class is the static init method which takes the DisplayObject as its parameters.  This DisplayObject is the SystemManager of the application and this method registers this delegate class for the TabNavigator component class with automation manager.  The other important method in this delegate class is the overridden <em>componentInitialized</em> method which gets called after the component, which is TabNavigator in our case, gets initialized.  It is in this method only that an EventListener can be added. Notice that in this case, an event listener is added to the &#39;&#39;TabBar&#39; of this TabNavigator component which listens for any recordable event. A handler method named <em>tabBar</em>recordHandler_ is added. In this handler, <em>recordAutomatableEvent _of the _UIComponentAutomationImpl _class is called, passing the event which will call the _recordAutomatableEvent _of the _AutomationManager</em>.</p>

<p>For replaying  this event, we need to override _replayAutomatableEvent _which has the Event as its parameter. The event that was recorded earlier needs to be dispatched from that component. In this case, the ItemClickEvent needs to be replayed by dispatching a MouseEvent to the item (TabBar) that was clicked.  This MouseEvent.CLICK is handled ultimately in the _replayAutomatableEvent _of _UIComponentAutomationImpl _which is in the parent hierarchy of _TabNavigatorAutomationImpl _class.</p>

<p>[sourcecode language=&quot;actionscript3&quot;] public function replayAutomatableEvent(event:Event):Boolean { var help:IAutomationObjectHelper = Automation.automationObjectHelper; if (event is MouseEvent &amp;&amp; event.type == MouseEvent.CLICK) return help.replayClick(uiComponent, event as MouseEvent);</p>

<p>[/sourcecode]</p>


                <hr>

                <div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'xebiaww'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2011/07/07/deploying-a-spring-hibernate-mysql-application-on-openshift-flex-redhat-paas-solution/" data-toggle="tooltip" data-placement="top" title="Deploying A Spring Hibernate Mysql Application On Openshift Flex Redhat Paas Solution">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2011/07/28/component-instrumentation-with-riatest-part-2/" data-toggle="tooltip" data-placement="top" title="Component Instrumentation With Riatest Part 2">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.facebook.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://github.com/xebiaww">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; Xebia Blog 2015</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


</body>

</html>
