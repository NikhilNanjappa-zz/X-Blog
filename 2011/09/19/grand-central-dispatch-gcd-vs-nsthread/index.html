<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Thoughts on latest technologies">

    <title>Grand Central Dispatch Gcd Vs Nsthread - Xebia Blog</title>

    <link rel="canonical" href="http://blog.xebia.in/2011/09/19/grand-central-dispatch-gcd-vs-nsthread/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Xebia Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/default-blog-pic.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Grand Central Dispatch Gcd Vs Nsthread</h1>
                    
                    <span class="meta">Posted by Rajdeep on September 19, 2011</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">

        <div class="row">
          <!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=shekhargulati" async="async"></script>

            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
              <h4>Reading time about 2  minutes</h4>

              <h1>Grand Central Dispatch (GCD) vs NSThread</h1>

<p>In this post I will talk about <a href="http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html">Grand central dispatch</a>, how it is better than using <a href="http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html">NSThread</a>. But before that I would like to see how and where threads are used. There are n number of distinct reasons behind using threads based on the structure and complexity of the app, but the prime reason behind using threads is <strong>asynchronously working on a task</strong> and then (if required) notifying the main thread. The whole idea behind doing so is that we do not want to block the main thread while we are executing a task. So lets see how it is implemented. Here is the small code snippet where we use NSThread to start a task in a new thread, do some time consuming task and notify to the main thread when we are done so that it can update the UI (The main thread is/should be used to update the UI).  [sourcecode lang=&quot;javascript&quot;] -(void)doSomeTask{ [NSThread detachNewThreadSelector:@selector(handlerForTask) toTarget:self withObject:nil]; }</p>

<p>-(void)handlerForTask{ NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init]; [self performSelectorOnMainThread:@selector(notifyMainThread) withObject:nil waitUntilDone:NO]; [pool release]; } 
```</p>

<p>The same implementation can be done using GCD as given below. [sourcecode lang=&quot;javascript&quot;] -(void)doSomeTask{ dispatch<em>queue</em>t queue = dispatch<em>queue</em>create(&quot;com.xebia.gcd&quot;, NULL); dispatch<em>queue</em>t mainQueue = dispatch<em>get</em>main<em>queue(); dispatch</em>async(queue, ^{ [self processTask]; dispatch<em>async(mainQueue, ^{ [self notifyMainThread]; }); }); dispatch</em>release(queue); }
```</p>

<p>See the obvious takeaway from the code above is that it is cleaner and easier to realize. In the threads we have to manage autorelease pool so that all the memory allocated is released properly. Also if we wanted to <strong>fire multiple selectors with multiple arguments</strong>, we could have easily done that using GCD. Here is the code snippet. </p>

<p>[sourcecode lang=&quot;javascript&quot;] -(void)doSomeTask{ NSDictionary *info ; dispatch<em>queue</em>t queue = dispatch<em>queue</em>create(&quot;com.xebia.gcd&quot;, NULL); dispatch<em>async(queue, ^{ // multiple selectors with multiple arguments [self executeFirstTaskWithInfo:info]; [self executeSecondTaskWithInfo:info andTaskNumber:2]; }); dispatch</em>release(queue); }
```</p>

<p>Apart from these here are the other advantages of using GCD instead of threads. </p>

<ul>
<li>The developer has to be careful about his/her strategy for using threads i.e. he/she has to manage problems like <strong>lockings, thread reuse</strong> etc. Where as GCD does all this for you.</li>
<li>Threads are highly memory consuming, whereas in GCD there are more cpu cycles available for executing tasks.</li>
<li><strong>Dispatch queues</strong> available in GCD helps us to schedule tasks more efficiently in GCD.</li>
</ul>

<p>To use GCD you just have to include &quot;dispatch/dispatch.h&quot; and it just works. In the next post I will try to analyze <strong>NSOperation and NSOperationQueue</strong>, which has also started using GCD instead of threads. </p>


                <hr>

                <div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'xebiaww'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2011/09/11/identifying-git-merge-conflicts/" data-toggle="tooltip" data-placement="top" title="Identifying Git Merge Conflicts">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2011/09/20/handling-dbrefs-in-mongodb-with-spring-data/" data-toggle="tooltip" data-placement="top" title="Handling Dbrefs In Mongodb With Spring Data">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.facebook.com/XebiaIndia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://github.com/xebiaww">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; Xebia Blog 2015</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58958750-1', 'auto');
  ga('send', 'pageview');

</script>
</body>

</html>
